<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>DataHub вузов РК — каталог</title>
<style>
  body {
    margin: 0;
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: #e6f0ff; /* нежно-синий светлый фон */
    color: #1e293b; /* темно-синий текст */
  }
  header {
    padding: 20px 24px;
    border-bottom: 1px solid #cbd5e1;
    display: flex;
    align-items: center;
    gap: 16px;
    background: #d0e2ff;
  }
  h1 {
    margin: 0;
    font-size: 20px;
  }
  .container {
    max-width: 1100px;
    margin: 28px auto;
    padding: 0 16px;
  }
  .controls {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
    margin-bottom: 18px;
  }
  input[type="search"], select {
    background: #fff;
    border: 1px solid #94a3b8;
    padding: 10px 12px;
    border-radius: 10px;
    color: #1e293b;
    min-width: 120px;
  }
  .grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 14px;
  }
  .card {
    background: #fff; /* белый фон */
    color: #1e293b;
    padding: 14px;
    border-radius: 12px;
    border: 1px solid #cbd5e1;
    box-shadow: 0 4px 12px rgba(100, 116, 139, 0.1);
    cursor: pointer;
    transition: transform 0.15s, box-shadow 0.15s;
  }
  .card:hover {
    transform: translateY(-6px);
    box-shadow: 0 12px 30px rgba(100, 116, 139, 0.2);
  }
  .card .title {
    font-weight: 700;
    margin-bottom: 6px;
  }
  .card .meta {
    font-size: 13px;
    color: #64748b;
  }
  .pill {
    display: inline-block;
    padding: 6px 8px;
    border-radius: 999px;
    background: #dbeafe;
    font-size: 12px;
    color: #1e293b;
  }
  .panel {
    position: fixed;
    right: 20px;
    top: 20px;
    bottom: 20px;
    width: 520px;
    max-width: calc(100% - 40px);
    background: #f9fafb; /* светлый фон панели */
    border: 1px solid #cbd5e1;
    border-radius: 12px;
    overflow: auto;
    box-shadow: 0 20px 60px rgba(100, 116, 139, 0.3);
    padding: 18px;
    display: none;
    color: #1e293b;
  }
  .panel.show {
    display: block;
  }
  .panel header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 12px;
  }
  .tabs {
    display: flex;
    gap: 8px;
    margin-top: 12px;
    flex-wrap: wrap;
  }
  .tab {
    padding: 8px 10px;
    border-radius: 10px;
    background: #e0e7ff;
    cursor: pointer;
    border: 1px solid #a5b4fc;
    color: #1e293b;
    user-select: none;
  }
  .tab.active {
    background: #6366f1;
    border-color: #4338ca;
    color: #fff;
  }
  .section {
    margin-top: 14px;
  }
  .program {
    padding: 10px;
    border-radius: 8px;
    border: 1px solid #cbd5e1;
    margin-bottom: 8px;
    background: #eef2ff;
  }
  .btn {
    display: inline-block;
    padding: 8px 12px;
    border-radius: 8px;
    background: #6366f1;
    color: #fff;
    font-weight: 700;
    text-decoration: none;
    cursor: pointer;
  }
  footer {
    padding: 20px;
    text-align: center;
    color: #64748b;
    font-size: 13px;
  }
  {
      font-family: Arial, sans-serif;
      background: #eef4ff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    .chat-container {
      background: #fff;
      width: 400px;
      max-width: 90%;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .messages {
      flex: 1;
      overflow-y: auto;
      border: 1px solid #ddd;
      padding: 10px;
      border-radius: 8px;
      min-height: 200px;
    }
    .message {
      margin-bottom: 10px;
    }
    .message.user {
      text-align: right;
      color: #1a73e8;
    }
    .message.bot {
      text-align: left;
      color: #333;
    }
    input[type="text"] {
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      flex: 1;
    }
    button {
      padding: 10px 15px;
      border: none;
      background: #1a73e8;
      color: #fff;
      border-radius: 8px;
      cursor: pointer;
    }
    .input-row {
      display: flex;
      gap: 10px;
    }
  @media (max-width: 800px) {
    .panel {
      position: fixed;
      left: 0;
      right: 0;
      top: auto;
      bottom: 0;
      width: 100%;
      height: 60vh;
      border-radius: 12px 12px 0 0;
    }
  }
</style>
</head>
<body>
<header>
  <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='36' height='36'><rect rx='8' width='36' height='36' fill='%236366f1'/><text x='50%' y='55%' font-size='18' font-family='Arial' text-anchor='middle' fill='white'>DH</text></svg>" alt="logo" style="width:36px;height:36px;border-radius:8px">
  <div>
    <h1>DataHub вузов РК</h1>
    <div style="color:#64748b;font-size:13px">Каталог университетов Казахстана — 30 записей</div>
  </div>
</header>
<main class="container">
  <div class="controls">
    <input id="search" type="search" placeholder="Поиск по названию или городу...">
    <select id="cityFilter"><option value="">Все города</option></select>
    <select id="grantFilter">
      <option value="">Все гранты</option>
      <option value="yes">Есть гранты</option>
      <option value="no">Нет грантов</option>
    </select>
    <select id="costFilter">
      <option value="">Все стоимости</option>
      <option value="low">до 300 000 тг/год</option>
      <option value="mid">300 000 - 600 000 тг/год</option>
      <option value="high">более 600 000 тг/год</option>
    </select>
    <select id="sort">
      <option value="name">Сортировать: название</option>
      <option value="city">По городу</option>
      <option value="cost">По стоимости</option>
    </select>
    <div style="margin-left:auto;color:#64748b;align-self:center">Нажмите на карточку, чтобы открыть страницу университета</div>
  </div>
  <div id="grid" class="grid"></div>
</main>
<aside id="panel" class="panel" aria-hidden="true">
  <header>
    <div>
      <div id="panelName" style="font-size:18px;font-weight:800"></div>
      <div id="panelCity" style="color:#64748b;font-size:13px;margin-top:4px"></div>
    </div>
    <div style="display:flex;gap:8px;align-items:center">
      <button id="closeBtn" title="Закрыть" style="background:transparent;border:0;color:#64748b;cursor:pointer;font-size:18px">✕</button>
    </div>
  </header>
  <div class="tabs" role="tablist">
    <div class="tab active" data-tab="about">Об университете</div>
    <div class="tab" data-tab="programs">Академические программы</div>
    <div class="tab" data-tab="admission">Приём и поступление</div>
    <div class="tab" data-tab="tour">3D тур</div>
  </div>
  <div id="tabContent" class="section"></div>
</aside>
<footer>
  Сделано для демонстрации — можно расширить: отзывы, рейтинги, интеграция 3D-туров и CMS.
</footer>
  
<div id="chatBot" style="position:fixed;bottom:20px;right:20px;width:350px;max-width:90%;background:#fff;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.2);overflow:hidden;display:flex;flex-direction:column;z-index:999">
  <div id="chatHeader" style="background:#1a73e8;color:#fff;padding:10px;font-weight:bold;display:flex;justify-content:space-between;align-items:center;cursor:pointer">
    <span>Чат с GPT</span>
    <button id="minimizeChat" style="background:transparent;border:none;color:white;font-size:18px;cursor:pointer">—</button>
  </div>
  <div id="chatBody" style="flex:1;padding:10px;overflow-y:auto;min-height:200px;display:flex;flex-direction:column;gap:5px"></div>
  <div id="chatInputRow" style="display:flex;gap:10px;padding:10px;border-top:1px solid #ccc">
    <input id="chatInput" type="text" placeholder="Введите сообщение..." style="flex:1;padding:8px;border-radius:8px;border:1px solid #ccc">
    <button id="sendChat" style="padding:8px 12px;border:none;background:#1a73e8;color:white;border-radius:8px;cursor:pointer">Отправить</button>
  </div>
</div>
<script>
  
  const universities = [
{
  "id": 1,
  "name": "Nazarbayev University",
  "city": "Астана",
  "desc": "Исследовательский университет с международным фокусом.",
  "programs": ["Computer Science (BSc)","Engineering (BEng)","Business (MBA)"],
  "admission": "Конкурсы и вступительные испытания; международные сертификаты учитываются.",
  "cost": 7600000,
  "grant": true,
  "phone": "+77172706688",
  "website": "https://nu.edu.kz",
  "tourUrl": "https://www.google.com/maps/embed?pb=!4v1765004069937!6m8!1m7!1s7JTqBdMEj66mZkppl5mfew!2m2!1d51.08994397906368!2d71.40115349796496!3f100.53087762734012!4f9.744171742922788!5f0.7820865974627469",
  "admissionUrl": "https://nu.edu.kz/admissions",
  "internationalUrl": "https://nu.edu.kz/ru/about/internationalcoop"
},
{
  "id": 2,
  "name": "Казахский национальный университет имени аль-Фараби",
  "city": "Алматы",
  "desc": "Один из старейших и крупнейших университетов Казахстана.",
  "programs": ["Mathematics","Philology","Physics"],
  "admission": "Единое национальное тестирование + внутренние конкурсы.",
  "cost": 1200000,
  "grant": false,
  "phone": "+77273773330",
  "website": "https://farabi.university/",
  "tourUrl": "https://www.google.com/maps/embed?pb=!4v1765003688395!6m8!1m7!1sr14II-0khOlx9HdNj1oDyQ!2m2!1d43.22676668801573!2d76.92271915869962!3f208.51279556020143!4f-3.0046338990707397!5f0.7820865974627469" ,
  "internationalUrl": "https://farabi.university/international"
},
{
  "id": 3,
  "name": "Евразийский национальный университет имени Л.Н. Гумилева",
  "city": "Астана",
  "desc": "Широкий спектр гуманитарных и технических программ.",
  "programs": ["International Relations","History","Biology"],
  "admission": "UNT и внутренние экзамены.",
  "cost": 1450000,
  "grant": true,
  "phone": "+77172709500",
  "website": "https://enu.kz/",
  "tourUrl": "https://www.google.com/maps/embed?pb=!4v1765003826174!6m8!1m7!1saHwiSX7SPWzHkJDrjjYq9A!2m2!1d51.15736066924768!2d71.46681400257636!3f63.146177725771246!4f8.077035110262585!5f0.7820865974627469",
  "internationalUrl": "https://enu.kz/international"
},
{
  "id": 4,
  "name": "Казахско-британский технический университет",
  "city": "Алматы",
  "desc": "Технический вуз с сильным международным сотрудничеством.",
  "programs": ["Computer Engineering","Telecommunications","Business Management"],
  "admission": "Вступительные экзамены, собеседование и мотивационное письмо.",
  "cost": 2100000,
  "grant": true,
  "phone": "+7727354242",
  "website": "kbtu.edu.kz",
  "tourUrl": "https://www.google.com/maps/embed?pb=!4v1765003935895!6m8!1m7!1sJPIUEo6j3AVm3dG7lYj_0Q!2m2!1d43.25475548927886!2d76.94322574663333!3f0.25983544218971844!4f6.4087047306798155!5f0.7820865974627469",
  "internationalUrl": "https://kbtu.edu.kz/ru/internatsionalizatsiya/foreign-students"
},
{
  "id": 5,
  "name": "Южно-Казахстанский государственный педагогический университет",
  "city": "Шымкент",
  "desc": "Ведущий педагогический вуз юга Казахстана.",
  "programs": ["Education","Psychology","Foreign Languages"],
  "admission": "Поступление по результатам UNT и внутренних испытаний.",
  "cost": 1800000,
  "grant": false,
  "phone": "+77221234567",
  "website": "https://skspu.kz",
  "tourUrl": "",
  "admissionUrl": "https://skspu.kz/admission",
  "internationalUrl": "https://skspu.kz/international"
},
{
  "id": 6,
  "name": "Кокшетауский государственный университет",
  "city": "Кокшетау",
  "desc": "Университет с широким спектром гуманитарных и технических направлений.",
  "programs": ["Law","Economics","Ecology"],
  "admission": "Поступление на основе результатов UNT и собеседования.",
  "cost": 200000,
  "grant": true,
  "phone": "+77132654321",
  "website": "https://ksu.kz",
  "tourUrl": "",
  "admissionUrl": "https://ksu.kz/admission",
  "internationalUrl": "https://ksu.kz/international"
},
{
  "id": 7,
  "name": "Карагандинский технический университет",
  "city": "Караганда",
  "desc": "Технический университет с сильным инженерным направлением.",
  "programs": ["Mechanical Engineering","Mining","Automation"],
  "admission": "Вступительные испытания и конкурс документов.",
  "cost": 350000,
  "grant": false,
  "phone": "+77212123456",
  "website": "https://kstu.kz",
  "tourUrl": "",
  "admissionUrl": "https://kstu.kz/admission",
  "internationalUrl": "https://kstu.kz/international"
},
{
  "id": 8,
  "name": "Шакарим Университет",
  "city": "Семей",
  "desc": "Университет с гуманитарными и техническими программами.",
  "programs": ["History","Chemistry","Mathematics"],
  "admission": "Поступление по результатам UNT и внутренних экзаменов.",
  "cost": 220000,
  "grant": true,
  "phone": "+77232123412",
  "website": "https://shakarim.edu.kz",
  "tourUrl": "",
  "admissionUrl": "https://shakarim.edu.kz/admission",
  "internationalUrl": "https://shakarim.edu.kz/international"
},
{
  "id": 9,
  "name": "Ауэзовский университет",
  "city": "Шымкент",
  "desc": "Крупный университет юга Казахстана с разносторонними программами.",
  "programs": ["Journalism","Economics","Biology"],
  "admission": "UNT и конкурсные испытания для поступления.",
  "cost": 260000,
  "grant": false,
  "phone": "+77221239876",
  "website": "https://auezov.edu.kz",
  "tourUrl": "",
  "admissionUrl": "https://auezov.edu.kz/admission",
  "internationalUrl": "https://auezov.edu.kz/international"
},
{
  "id": 10,
  "name": "Западно-Казахстанский медицинский университет",
  "city": "Уральск",
  "desc": "Медицинский вуз с современными программами.",
  "programs": ["General Medicine","Dentistry","Pharmacy"],
  "admission": "Вступительные экзамены и собеседование.",
  "cost": 600000,
  "grant": true,
  "phone": "+77151234567",
  "website": "https://wkmu.kz",
  "tourUrl": "",
  "admissionUrl": "https://wkmu.kz/admission",
  "internationalUrl": "https://wkmu.kz/international"
},
{
  "id": 11,
  "name": "Казахский национальный аграрный университет",
  "city": "Алматы",
  "desc": "Специализируется на сельском хозяйстве и биотехнологиях.",
  "programs": ["Agronomy","Veterinary Science","Biotechnology"],
  "admission": "UNT и профильные экзамены.",
  "cost": 230000,
  "grant": false,
  "phone": "+77271230011",
  "website": "https://kaznau.kz",
  "tourUrl": "",
  "admissionUrl": "https://kaznau.kz/admission",
  "internationalUrl": "https://kaznau.kz/international"
},
{
  "id": 12,
  "name": "Евразийский национальный технический университет",
  "city": "Астана",
  "desc": "Ведущий технический вуз с акцентом на инновации.",
  "programs": ["Information Technology","Mechanical Engineering","Energy"],
  "admission": "Конкурс на основе UNT и внутренние испытания.",
  "coords": {"lat": 51.1360, "lng": 71.4300},
  "cost": 450000,
  "grant": true,
  "phone": "+77113334455",
  "website": "https://entu.kz",
  "tourUrl": "",
  "admissionUrl": "https://entu.kz/admission",
  "internationalUrl": "https://entu.kz/international"
},
{
  "id": 13,
  "name": "Казахский университет экономики и финансов",
  "city": "Алматы",
  "desc": "Экономический вуз с международными программами.",
  "programs": ["Economics","Finance","International Trade"],
  "admission": "UNT и собеседование.",
  "cost": 380000,
  "grant": false,
  "phone": "+77271239999",
  "website": "https://kuef.kz",
  "tourUrl": "",
  "admissionUrl": "https://kuef.kz/admission",
  "internationalUrl": "https://kuef.kz/international"
},
{
  "id": 14,
  "name": "Кызылординский государственный университет",
  "city": "Кызылорда",
  "desc": "Региональный университет с широким выбором направлений.",
  "programs": ["History","Law","Education"],
  "admission": "UNT и внутренние экзамены.",
  "cost": 160000,
  "grant": true,
  "phone": "+77242420000",
  "website": "https://ksu-kyz.kz",
  "tourUrl": "",
  "admissionUrl": "https://ksu-kyz.kz/admission",
  "internationalUrl": "https://ksu-kyz.kz/international"
},
{
  "id": 15,
  "name": "Актюбинский региональный университет",
  "city": "Актобе",
  "desc": "Университет с гуманитарным и техническим направлениями.",
  "programs": ["Sociology","Engineering","Management"],
  "admission": "UNT и внутренние конкурсы.",
  "cost": 190000,
  "grant": false,
  "phone": "+77252121212",
  "website": "https://actobeuniv.kz",
  "tourUrl": "",
  "admissionUrl": "https://actobeuniv.kz/admission",
  "internationalUrl": "https://actobeuniv.kz/international"
},
{
  "id": 16,
  "name": "Павлодарский государственный университет",
  "city": "Павлодар",
  "desc": "Разносторонний вуз с программами в разных сферах.",
  "programs": ["Physics","Chemistry","Economics"],
  "admission": "UNT и внутренние экзамены.",
  "cost": 210000,
  "grant": true,
  "phone": "+77233121212",
  "website": "https://psu.kz",
  "tourUrl": "",
  "admissionUrl": "https://psu.kz/admission",
  "internationalUrl": "https://psu.kz/international"
},
{
  "id": 17,
  "name": "Семейский государственный медицинский университет",
  "city": "Семей",
  "desc": "Медицинский вуз с современной подготовкой специалистов.",
  "programs": ["Medicine","Nursing","Pharmacy"],
  "admission": "Вступительные экзамены и собеседование.",
  "cost": 580000,
  "grant": false,
  "phone": "+77233221212",
  "website": "https://ssmu.kz",
  "tourUrl": "",
  "admissionUrl": "https://ssmu.kz/admission",
  "internationalUrl": "https://ssmu.kz/international"
},
{
  "id": 18,
  "name": "Таразский университет",
  "city": "Тараз",
  "desc": "Исторически сложившийся университет южного региона.",
  "programs": ["History","Law","Pedagogy"],
  "admission": "UNT и внутренние экзамены.",
  "cost": 170000,
  "grant": true,
  "phone": "+77261234567",
  "website": "https://tsu.kz",
  "tourUrl": "",
  "admissionUrl": "https://tsu.kz/admission",
  "internationalUrl": "https://tsu.kz/international"
},
{
  "id": 19,
  "name": "Туркестанский университет",
  "city": "Туркестан",
  "desc": "Вуз с акцентом на современные технологии и гуманитарные науки.",
  "programs": ["Computer Science","Philosophy","Management"],
  "admission": "UNT и дополнительные испытания.",
  "cost": 240000,
  "grant": false,
  "phone": "+77261239876",
  "website": "https://turkestan.edu.kz",
  "tourUrl": "",
  "admissionUrl": "https://turkestan.edu.kz/admission",
  "internationalUrl": "https://turkestan.edu.kz/international"
},
{
  "id": 20,
  "name": "Уральский государственный университет",
  "city": "Уральск",
  "desc": "Разносторонний университет с сильными инженерными программами.",
  "programs": ["Mechanical Engineering","Mathematics","Economics"],
  "admission": "UNT и внутренние тесты.",
  "cost": 220000,
  "grant": true,
  "phone": "+77152321234",
  "website": "https://uraluniv.kz",
  "tourUrl": "",
  "admissionUrl": "https://uraluniv.kz/admission",
  "internationalUrl": "https://uraluniv.kz/international"
},
{
  "id": 21,
  "name": "Жезказганский национальный университет",
  "city": "Жезказган",
  "desc": "Региональный вуз с техническими и гуманитарными программами.",
  "programs": ["Mining","Geology","Law"],
  "admission": "UNT и внутренние экзамены.",
  "cost": 180000,
  "grant": false,
  "phone": "+77274221221",
  "website": "https://zhezkazgan.edu.kz",
  "tourUrl": "",
  "admissionUrl": "https://zhezkazgan.edu.kz/admission",
  "internationalUrl": "https://zhezkazgan.edu.kz/international"
},
{
  "id": 22,
  "name": "Костанайский государственный университет",
  "city": "Костанай",
  "desc": "Университет с сильным педагогическим направлением.",
  "programs": ["Education","Psychology","History"],
  "admission": "UNT и внутренние конкурсы.",
  "cost": 190000,
  "grant": true,
  "phone": "+77281441234",
  "website": "https://ksu-kost.kz",
  "tourUrl": "",
  "admissionUrl": "https://ksu-kost.kz/admission",
  "internationalUrl": "https://ksu-kost.kz/international"
},
{
  "id": 23,
  "name": "Восточно-Казахстанский технический университет",
  "city": "Өскемен",
  "desc": "Технический вуз с инновационными программами.",
  "programs": ["Electrical Engineering","Automation","Construction"],
  "admission": "UNT и вступительные испытания.",
  "cost": 350000,
  "grant": false,
  "phone": "+77232321212",
  "website": "https://ekstu.kz",
  "tourUrl": "",
  "admissionUrl": "https://ekstu.kz/admission",
  "internationalUrl": "https://ekstu.kz/international"
},
{
  "id": 24,
  "name": "Казахский международный университет имени Абылай хана",
  "city": "Алматы",
  "desc": "Университет с международным уклоном.",
  "programs": ["International Relations","Linguistics","Economics"],
  "admission": "UNT и собеседование.",
  "coords": {"lat": 43.2350, "lng": 76.8850},
  "cost": 320000,
  "grant": true,
  "phone": "+77271231313",
  "website": "https://ablai.kz",
  "tourUrl": "",
  "admissionUrl": "https://ablai.kz/admission",
  "internationalUrl": "https://ablai.kz/international"
},
{
  "id": 25,
  "name": "Казахская академия архитектуры и строительства",
  "city": "Алматы",
  "desc": "Вуз с упором на архитектуру и строительство.",
  "programs": ["Architecture","Civil Engineering","Urban Planning"],
  "admission": "Вступительные испытания и портфолио.",
  "cost": 400000,
  "grant": false,
  "phone": "+77271237777",
  "website": "https://alace.kz",
  "tourUrl": "",
  "admissionUrl": "https://alace.kz/admission",
  "internationalUrl": "https://alace.kz/international"
},
{
  "id": 26,
  "name": "Кокшетауский технический институт",
  "city": "Кокшетау",
  "desc": "Технический институт с широким выбором инженерных программ.",
  "programs": ["Mechanical Engineering","Computer Science","Energy"],
  "admission": "UNT и внутренние тесты.",
  "cost": 210000,
  "grant": true,
  "phone": "+77132659900",
  "website": "https://kti.kz",
  "tourUrl": "",
  "admissionUrl": "https://kti.kz/admission",
  "internationalUrl": "https://kti.kz/international"
},
{
  "id": 27,
  "name": "Казахская национальная консерватория",
  "city": "Алматы",
  "desc": "Ведущий музыкальный вуз страны.",
  "programs": ["Music Performance","Composition","Conducting"],
  "admission": "Прослушивание и творческий конкурс.",
  "cost": "от 730000",
  "grant": false,
  "phone": "+77271233111",
  "website": "https://conservatory.kz",
  "tourUrl": "",
  "admissionUrl": "https://conservatory.kz/admission",
  "internationalUrl": "https://conservatory.kz/international"
},
{
  "id": 28,
  "name": "Казахско-русский университет",
  "city": "Алматы",
  "desc": "Международный университет с разноплановыми программами.",
  "programs": ["Business","Law","Engineering"],
  "admission": "UNT и собеседование.",
  "cost": "от 800000",
  "grant": true,
  "phone": "+77271232222",
  "website": "https://kru.kz",
  "tourUrl": "",
  "admissionUrl": "https://kru.kz/admission",
  "internationalUrl": "https://kru.kz/international"
},
{
  "id": 29,
  "name": "Западно-Казахстанский государственный университет",
  "city": "Уральск",
  "desc": "Университет с гуманитарными и техническими направлениями.",
  "programs": ["Sociology","Economics","Law"],
  "admission": "UNT и внутренние экзамены.",
  "cost": "от 500000",
  "grant": false,
  "phone": "+77152551234",
  "website": "https://wksu.kz",
  "tourUrl": "",
  "admissionUrl": "https://wksu.kz/admission",
  "internationalUrl": "https://wksu.kz/international"
},
{
  "id": 30,
  "name": "Актюбинский региональный университет",
  "city": "Актобе",
  "desc": "Региональный университет с широким спектром специальностей.",
  "programs": ["Philosophy","Economics","Mathematics"],
  "admission": "UNT и внутренние конкурсы.",
  "cost": "от 190000",
  "grant": true,
  "phone": "+77252129999",
  "website": "https://zhubanov.kz",
  "tourUrl": "",
  "admissionUrl": "https://zhubanov.kz/admission",
  "internationalUrl": "https://zhubanov.kz/international"
}
  ];

   const grid = document.getElementById('grid');
  const search = document.getElementById('search');
  const cityFilter = document.getElementById('cityFilter');
  const grantFilter = document.getElementById('grantFilter');
  const costFilter = document.getElementById('costFilter');
  const sort = document.getElementById('sort');
  const panel = document.getElementById('panel');
  const panelName = document.getElementById('panelName');
  const panelCity = document.getElementById('panelCity');
  const tabContent = document.getElementById('tabContent');
  const closeBtn = document.getElementById('closeBtn');

  // Заполняем фильтр городов
  const cities = Array.from(new Set(universities.map(u=>u.city))).sort();
  cities.forEach(c=>{
    const o=document.createElement('option');
    o.value=c;
    o.textContent=c;
    cityFilter.appendChild(o);
  });

  function renderGrid(list){
    grid.innerHTML='';
    if(list.length===0){
      grid.innerHTML='<div style="color:#64748b;text-align:center;width:100%;padding:40px 0">По вашему запросу ничего не найдено</div>';
      return;
    }
    list.forEach(u=>{
      const el=document.createElement('div');
      el.className='card';
      el.tabIndex=0;
      el.innerHTML=`
        <div class="title">${u.name}</div>
        <div class="meta">${u.city} · <span class="pill">Программ: ${u.programs.length}</span></div>
        <div style="margin-top:8px;color:#64748b;font-size:13px">${u.desc}</div>
        <div style="margin-top:8px;font-size:13px">
          <strong>Стоимость: </strong>${u.cost.toLocaleString()} тг/год<br>
          <strong>Гранты: </strong>${u.grant ? 'Есть' : 'Нет'}
        </div>
      `;
      el.addEventListener('click',()=>openPanel(u));
      el.addEventListener('keypress',e=>{if(e.key==='Enter') openPanel(u)});
      grid.appendChild(el);
    });
  }

  function openPanel(u){
    panel.classList.add('show');
    panel.setAttribute('aria-hidden','false');
    panelName.textContent = u.name;
    panelCity.textContent = u.city;
    panel.dataset.currentId = u.id;
    setActiveTab('about');
    renderAbout(u);
  }

  function closePanel(){
    panel.classList.remove('show');
    panel.setAttribute('aria-hidden','true');
  }
  closeBtn.addEventListener('click', closePanel);

  document.querySelectorAll('.tab').forEach(t=>t.addEventListener('click', e=>{
    document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));
    e.currentTarget.classList.add('active');
    setActiveTab(e.currentTarget.dataset.tab);
  }));

  function setActiveTab(tab){
    const id = +panel.dataset.currentId;
    const u = universities.find(x=>x.id===id);
    if(!u) return;
    if(tab==='about') renderAbout(u);
    if(tab==='programs') renderPrograms(u);
    if(tab==='admission') renderAdmission(u);
    if(tab==='tour') renderTour(u);
  }

  function renderAbout(u){
  tabContent.innerHTML = `
    <div style="font-size:14px;color:#64748b">${u.desc}</div>

    <div class="section">
      <strong>Контакты</strong>
      <div style="color:#64748b;margin-top:6px">
        Город: ${u.city}<br>
        Телефон: ${u.phone || "+7 (727) 000-00-00"}<br>
        ${u.website ? `Сайт: <a href="${u.website}" target="_blank">${u.website}</a>` : ""}
      </div>
    </div>
    
    <div class="section">
      <strong>Стоимость обучения</strong>
      <div style="color:#64748b;margin-top:6px">
        ${u.cost ? u.cost.toString().replace(/\D/g,'').toLocaleString() + " тг/год" : "Нет данных"}
      </div>
    </div>

    <div class="section">
      <strong>Гранты</strong>
      <div style="color:#64748b;margin-top:6px">
        ${u.grant ? "Доступны гранты" : "Гранты не предоставляются"}
      </div>
    </div>
  `;
}

  function renderPrograms(u){
    tabContent.innerHTML = `<div><strong>Академические программы</strong></div>`;
    u.programs.forEach(p=>{
      const d = document.createElement('div');
      d.className = 'program';
      d.innerHTML = `<div style="font-weight:700">${p}</div><div style="color:#64748b;margin-top:6px">Уровни: бакалавриат / магистратура — проверьте разделы на официальном сайте.</div>`;
      tabContent.appendChild(d);
    });
  }

function renderAdmission(u) {
  tabContent.innerHTML = `
    <div><strong>Приём и поступление</strong></div>

    <div style="color:#64748b;margin-top:8px">
      ${u.admission || "Информация скоро появится."}
    </div>

    <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap">

      ${u.website ? `
        <a class="btn" href="${u.website}" target="_blank">
          Перейти на сайт
        </a>
      ` : ""}

      ${u.admissionUrl ? `
        <a class="btn" href="${u.admissionUrl}" target="_blank">
          Приём / Поступление
        </a>
      ` : ""}

    </div>
  `;
}
function renderTour(u) {
  if (u.name === "Казахский национальный университет имени аль-Фараби") {
    tabContent.innerHTML = `
      <div><strong>3D тур</strong></div>
      <div style="margin-top:8px">
        <a href="https://3dtour.kaznu.kz" target="_blank" class="btn">Открыть 3D тур Al-Farabi</a>
      </div>
    `;
    return;
  }

  // Вузы, для которых есть tourUrl с готовым iframe-ссылкой
  const specialTours = [
    "Nazarbayev University",
    "Казахско-британский технический университет",
    "Евразийский национальный университет имени Л.Н. Гумилева"
  ];

  if (specialTours.includes(u.name) && u.tourUrl) {
    // Убираем возможный префикс src= из tourUrl, если есть
    const src = u.tourUrl.replace(/^src="?|"?$/g, '');
    tabContent.innerHTML = `
      <div><strong>3D тур</strong></div>
      <iframe 
        width="100%" 
        height="320" 
        frameborder="0" 
        style="border:0;border-radius:8px;margin-top:8px" 
        src="${src}" 
        allowfullscreen>
      </iframe>
    `;
    return;
  }

  // Для всех остальных просто карта по названию и городу
  tabContent.innerHTML = `
    <div><strong>3D тур</strong></div>
    <iframe 
      width="100%" 
      height="320" 
      frameborder="0" 
      style="border:0;border-radius:8px;margin-top:8px" 
      src="https://maps.google.com/maps?q=${encodeURIComponent(u.name + ' ' + u.city)}&t=k&output=embed" 
      allowfullscreen>
    </iframe>
  `;
}

  function applyFilters(){
    const q = search.value.trim().toLowerCase();
    const city = cityFilter.value;
    const grantVal = grantFilter.value;
    const costVal = costFilter.value;

    let list = universities.filter(u=>{
      if(q && !(u.name.toLowerCase().includes(q) || u.city.toLowerCase().includes(q))) return false;

      if(city && u.city !== city) return false;

      if(grantVal === 'yes' && !u.grant) return false;
      if(grantVal === 'no' && u.grant) return false;

      if(costVal === 'low' && u.cost > 300000) return false;
      if(costVal === 'mid' && (u.cost < 300000 || u.cost > 600000)) return false;
      if(costVal === 'high' && u.cost <= 600000) return false;

      return true;
    });

    if(sort.value === 'name') {
      list.sort((a,b)=>a.name.localeCompare(b.name));
    } else if(sort.value === 'city') {
      list.sort((a,b)=>a.city.localeCompare(b.city));
    } else if(sort.value === 'cost') {
      list.sort((a,b)=>a.cost - b.cost);
    }

    renderGrid(list);
  }

  [search, cityFilter, grantFilter, costFilter, sort].forEach(el=>{
    el.addEventListener('input', applyFilters);
  });

  renderGrid(universities);

const chatBot = document.getElementById("chatBot");
const chatBody = document.getElementById("chatBody");
const chatInputRow = document.getElementById("chatInputRow");
const minimizeBtn = document.getElementById("minimizeChat");
const sendBtn = document.getElementById("sendChat");
const promptInput = document.getElementById("chatInput");

let isMinimized = false;

minimizeBtn.addEventListener("click", () => {
  if (!isMinimized) {
    chatBody.style.display = "none";
    chatInputRow.style.display = "none";
    chatBot.style.height = "40px";
    isMinimized = true;
    minimizeBtn.textContent = "▢"; 
  } else {
    chatBody.style.display = "flex";
    chatInputRow.style.display = "flex";
    chatBot.style.height = "auto";
    isMinimized = false;
    minimizeBtn.textContent = "—";
  }
});

document.getElementById("chatHeader").addEventListener("click", (e) => {
  if (isMinimized && e.target.id !== "minimizeChat") {
    chatBody.style.display = "flex";
    chatInputRow.style.display = "flex";
    chatBot.style.height = "auto";
    isMinimized = false;
    minimizeBtn.textContent = "—";
  }
});

sendBtn.addEventListener("click", async () => {
  const prompt = promptInput.value.trim();
  if (!prompt) return;

  const userMsg = document.createElement("div");
  userMsg.textContent = prompt;
  userMsg.className = "message user";
  chatBody.appendChild(userMsg);
  chatBody.scrollTop = chatBody.scrollHeight;
  promptInput.value = "";

  try {
    const response = await fetch("https://datauni-kz.onrender.com/api/generate", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ prompt })
    });
    const data = await response.json();

    const botMsg = document.createElement("div");
    botMsg.textContent = data.result;
    botMsg.className = "message bot";
    chatBody.appendChild(botMsg);
    chatBody.scrollTop = chatBody.scrollHeight;
  } catch (err) {
    const errorMsg = document.createElement("div");
    errorMsg.textContent = "Ошибка: " + err.message;
    errorMsg.className = "message bot";
    errorMsg.style.color = "red";
    chatBody.appendChild(errorMsg);
    chatBody.scrollTop = chatBody.scrollHeight;
  }
});

promptInput.addEventListener("keypress", (e) => {
  if (e.key === "Enter") sendBtn.click();
});
</script>
</body>
</html>


